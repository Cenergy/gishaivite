<template>
  <div class="map-popup-content">
    <img
      :src="photo.url"
      :alt="photo.title || 'ç…§ç‰‡'"
      style="w-full max-h-37.5 object-cover"
    />
    <div class="popup-info">
      <p>{{ photo.description || '' }}</p>
      <p><small>æ‹æ‘„æ—¶é—´: {{ photo.date || 'æœªçŸ¥' }}</small></p>
      <button class="popup-view-btn" :data-photo-id="photo.id" @click="handleViewPhoto">æŸ¥çœ‹å¤§å›¾</button>
    </div>
  </div>
</template>

<script setup lang="ts">
import { onMounted } from 'vue'
import { Photo } from "@/types/photo";

const props = defineProps<{
  photo: Photo
}>()

// å®šä¹‰äº‹ä»¶
const emit = defineEmits<{
  viewPhoto: [photoId: string, photo: Photo]
}>()

// å¤„ç†æŸ¥çœ‹å¤§å›¾ç‚¹å‡»äº‹ä»¶
const handleViewPhoto = () => {
  emit('viewPhoto', props.photo.id, props.photo)
  console.log('æŸ¥çœ‹å¤§å›¾:', props.photo.title || props.photo.id)
}

onMounted(() => {
  console.log("ğŸš€ ~ onMounted ~ photo:", props.photo);
})

</script>
